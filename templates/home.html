{% extends "base.html" %}
{% block content %}
<h1>Available Events</h1>
<form method="get" class="search-form">
  <label>Filter by Category:</label>
  <select name="category" onchange="this.form.submit()">
    <option value="">All Categories</option>
    {% for c in categories %}
      <option value="{{ c }}" {% if selected_category==c %}selected{% endif %}>{{ c }}</option>
    {% endfor %}
  </select>
</form>
<div class="grid">
  {% for e in events %}
    <div class="card">
      <h3>{{ e.name }}</h3>
      <p><strong>Category:</strong> {{ e.category }}</p>
      <p><strong>Days:</strong> {{ e.available_days }}</p>
      <p><strong>Venues:</strong> {{ e.available_venues }}</p>
      <p><strong>Price:</strong> â‚¹{{ '%.2f'|format(e.price) }}</p>
      <div class="actions">
        <a class="btn" href="{{ url_for('event_detail', event_id=e.id) }}">View</a>
        {% if current_user.is_authenticated %}
          <a class="btn" href="{{ url_for('book_event', event_id=e.id) }}">Book</a>
        {% else %}
          <a class="btn" href="{{ url_for('login') }}">Login to Book</a>
        {% endif %}
      </div>
    </div>
  {% else %}
    <p>No events found in this category.</p>
  {% endfor %}
</div>
{% endblock %}

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>